<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="description" content="Paint3D: Paint Anything 3D with Lighting-Less Texture Diffusion Models">
    <meta name="keywords" content="Paint3D, diffusion, 3D textures, 3D contents, generation">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Paint3D</title>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <link href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro" rel="stylesheet">

    <link rel="stylesheet" href="./static/css/bulma.min.css">
    <link rel="stylesheet" href="./static/css/bulma-carousel.min.css">
    <link rel="stylesheet" href="./static/css/bulma-slider.min.css">
    <link rel="stylesheet" href="./static/css/fontawesome.all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
    <link rel="stylesheet" href="./static/css/index.css">

    <style>
        .render_wrapper {
            position: relative;
            height: 300px;
         }
        .render_wrapper_small {
            position: relative;
            height: 200px;
         }
        .render_div {
            position: absolute;
            top: 0;
            left: 0;
        }

        #interpolation-image-wrapper-car{
            text-align: center;
        }
        #interpolation-image-wrapper-chair{
            text-align: center;
        }
        .nested-columns {
            margin-bottom: 0 !important;
        }
    </style>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script defer src="./static/js/fontawesome.all.min.js"></script>
    <script src="./static/js/bulma-carousel.min.js"></script>
    <script src="./static/js/bulma-slider.min.js"></script>
    <script src="./static/js/index.js"></script>

    <!-- scripts and css for MVDream -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="./static/css/styles.css">
    <script src="./static/js/video_comparison.js"></script>
</head>

<body>

    <section class="hero">
        <div class="hero-body">
            <div class="container is-max-desktop">
                <div class="columns is-centered">
                    <div class="column has-text-centered">
                        <h1 class="title is-1 publication-title">Paint3D: Paint Anything 3D with Lighting-less Texture Diffusion Models</h1>

                        <div class="is-size-5 publication-authors">
                            <span class="author-block">
                            <a href="https://scholar.google.com/citations?user=tgDc0fsAAAAJ">Xianfang Zeng</a><sup>1*</sup>,
                            </span>
                            <span class="author-block">
                            <a href="https://chenxin.tech/">Xin Chen</a><sup>1*</sup>,
                            </span>
                            <span class="author-block">
                            <a href="https://qzq2514.github.io/">Zhongqi Qi</a><sup>1*</sup>,
                            </span>
                            <span class="author-block">
                            <a href="https://scholar.google.com/citations?user=A6K6bkoAAAAJ">Wen Liu</a><sup>1</sup>,
                            </span>
                            <span class="author-block">
                            <a href="https://github.com/Maikouuu">Zibo Zhao</a><sup>1,3</sup>,
                            </span>
                            <span class="author-block">
                            <a href="https://github.com/OpenTexture/Paint3D">Zhibin Wang</a><sup>1</sup>,
                            </span>
                            <span class="author-block">
                            <a href="https://github.com/OpenTexture/Paint3D">BIN FU</a><sup>1</sup>,
                            </span>
                            <span class="author-block">
                            <a href="https://april.zju.edu.cn/team/dr-yong-liu/">Yong Liu</a><sup>2</sup>,
                            </span>
                            <span class="author-block">
                            <a href="https://www.skicyyu.org">Gang Yu</a><sup>1+</sup>
                            </span>
                        </div>

                        <div class="is-size-5 publication-authors">
                            <span class="author-block"><sup>1</sup>Tencent PCG,</span>
                            <span class="author-block"><sup>2</sup>Zhejiang University,</span>
                            <span class="author-block"><sup>3</sup>ShanghaiTech University</span>
                        </div>

                        <div class="column has-text-centered">
                            <div class="publication-links">
                          <span class="link-block">
                            <a href="https://arxiv.org/abs/2312.13913"
                               class="external-link button is-normal is-rounded is-dark">
                              <span class="icon">
                                  <i class="ai ai-arxiv"></i>
                              </span>
                              <span>arXiv</span>
                            </a>
                          </span>
                                <!-- Code Link. -->
                                <span class="link-block">
                            <a href="https://github.com/OpenTexture/Paint3D"
                               class="external-link button is-normal is-rounded is-dark">
                              <span class="icon">
                                  <i class="fab fa-github"></i>
                              </span>
                              <span>Code</span>
                              </a>
                          </span>
                                <!-- Video Link. -->
                                <span class="link-block">
                            <a href="https://youtu.be/T4GUOLvO1n0?si=X4dWHmPl9Go6PI-6"
                               class="external-link button is-normal is-rounded is-dark">
                              <span class="icon">
                                  <i class="fab fa-youtube"></i>
                              </span>
                              <span>Video</span>
                            </a>
                          </span>
                            </div>
                        </div>

                        <div class="is-size-5 publication-authors">
                            <video id="teaser" autoplay muted loop playsinline height="100%">
                                <source src="./static/videos/teaser2.mp4"
                                        type="video/mp4">
                            </video>
                            <h2 class="subtitle has-text-centered">
                                Paint3D is capable of producing high-resolution, lighting-less, and diverse 2K UV texture maps for untextured 3D meshes conditioned on text or image inputs.
                            </h2>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </section>


    <section class="section">
        <div class="container is-max-desktop">
            <!-- Abstract. -->
            <div class="columns is-centered has-text-centered">
                <div class="column is-four-fifths">
                    <h2 class="title is-3">Abstract</h2>
                    <div class="content has-text-justified">
                        <p>
                            We present Paint3D, a novel coarse-to-fine generative framework that is capable of producing
                            high-resolution, lighting-less, and diverse 2K UV texture maps for untextured 3D meshes
                            conditioned on text or image inputs. The key challenge addressed is generating high-quality
                            textures without embedded illumination information, which allows the textures to be
                            re-lighted or re-edited within modern graphics pipelines. To achieve this, our method first
                            leverages a pre-trained depth-aware 2D diffusion model to generate view-conditional images
                            and perform multi-view texture fusion, producing an initial coarse texture map. However, as
                            2D models cannot fully represent 3D shapes and disable lighting effects, the coarse texture
                            map exhibits incomplete areas and illumination artifacts. To resolve this, we train separate
                            UV Inpainting and UVHD diffusion models specialized for the shape-aware refinement of
                            incomplete areas and the removal of illumination artifacts. Through this coarse-to-fine
                            process, Paint3D can produce high-quality 2K UV textures that maintain semantic consistency
                            while being lighting-less, significantly advancing the state-of-the-art in texturing 3D objects.
                        </p>
                    </div>
                    <img src="./static/imgs/overview.jpg"/>
                </div>
            </div>
            <!--/ Abstract. -->

            <!-- Paper video. -->
            <div class="columns is-centered has-text-centered">
                <div class="column is-four-fifths">
                    <h2 class="title is-3">Video</h2>
<!--                    <div class="publication-video">-->
<!--                        <iframe width="560" height="315"-->
<!--                                src="https://www.youtube.com/embed/T4GUOLvO1n0?si=l-PLk4OMIPaFpwXF"-->
<!--                                title="YouTube video player" frameborder="0"-->
<!--                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"-->
<!--                                allowfullscreen></iframe>-->
<!--                    </div>-->
                    <div class="content has-text-centered">
                        <video id="replay-video1"
                               autoplay
                               loop
                               controls
                               muted
                               preload
                               playsinline
                               width="100%">
                            <source src="./static/videos/video_demo_full_c.mp4"
                                    type="video/mp4">
                        </video>
                    </div>
                </div>
            </div>
            <!--/ Paper video. -->
        </div>
    </section>


<!--    <section class="section">-->
<!--        <div class="container is-max-desktop">-->

<!--            &lt;!&ndash; Overview. &ndash;&gt;-->
<!--            <div class="columns is-centered has-text-centered">-->
<!--                <div class="column is-full-width">-->
<!--                    <h2 class="title is-3">Method Overview</h2>-->
<!--                    <img src="./static/imgs/overview.jpg"/>-->
<!--                    <div class="content has-text-justified">-->
<!--                        <p>-->
<!--                            The overview of our coarse-to-fine framework. The coarse stage samples multi-view images-->
<!--                            from the pre-trained 2D image diffusion models, then back-projects these images onto the-->
<!--                            mesh surface to create initial texture maps. The refinement stage generates high-quality-->
<!--                            textures with a diffusion model in UV space, conditioned on the position map and the coarse-->
<!--                            texture map.-->
<!--                        </p>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </section>-->


    <section class="section">
        <div class="container is-max-desktop">
            <div class="container">
                <h2 class="title is-3">Conditional Generation</h2>
                <h2 class="title is-4">Text Conditional Generation</h2>

                <div id="results-carousel" class="carousel results-carousel">
                    <div class="item item-steve render_wrapper">
                        <div id="textCond2_col1" class="render_div"></div>
                    </div>
                    <div class="item item-steve render_wrapper">
                        <div id="textCond2_col2" class="render_div"></div>
                    </div>
                    <div class="item item-steve render_wrapper">
                        <div id="textCond2_col3" class="render_div"></div>
                    </div>
                    <div class="item item-steve render_wrapper">
                        <div id="textCond2_col4" class="render_div"></div>
                    </div>
                </div>

<!--                <div id="results-carousel" class="carousel results-carousel">-->
<!--                    <div class="item item-steve render_wrapper">-->
<!--                        <div id="textCond3_col1" class="render_div"></div>-->
<!--                    </div>-->
<!--                    <div class="item item-steve render_wrapper">-->
<!--                        <div id="textCond3_col2" class="render_div"></div>-->
<!--                    </div>-->
<!--                    <div class="item item-steve render_wrapper">-->
<!--                        <div id="textCond3_col3" class="render_div"></div>-->
<!--                    </div>-->
<!--                    <div class="item item-steve render_wrapper">-->
<!--                        <div id="textCond3_col4" class="render_div"></div>-->
<!--                    </div>-->
<!--                </div>-->


<!--                <div style="text-align: center; font-size: large; height: 50px;"></div>-->
<!--                <h2 class="title is-4">Image Conditional Generation</h2>-->

<!--                <div id="results-carousel" class="carousel results-carousel">-->
<!--                    <div class="item item-steve render_wrapper">-->
<!--                        <div id="imgCond1_col2" class="render_div"></div>-->
<!--                    </div>-->
<!--                    <div class="item item-steve render_wrapper">-->
<!--                        <div id="imgCond1_col2" class="render_div"></div>-->
<!--                    </div>-->
<!--                    <div class="item item-steve render_wrapper">-->
<!--                        <div id="imgCond1_col3" class="render_div"></div>-->
<!--                    </div>-->
<!--                    <div class="item item-steve render_wrapper">-->
<!--                        <div id="imgCond1_col4" class="render_div"></div>-->
<!--                    </div>-->
<!--                </div>-->

<!--                <div id="results-carousel" class="carousel results-carousel">-->
<!--                    <div class="item item-steve render_wrapper">-->
<!--                        <div id="imgCond1_col2" class="render_div"></div>-->
<!--                    </div>-->
<!--                    <div class="item item-steve render_wrapper">-->
<!--                        <div id="imgCond2_col2" class="render_div"></div>-->
<!--                    </div>-->
<!--                    <div class="item item-steve render_wrapper">-->
<!--                        <div id="imgCond2_col3" class="render_div"></div>-->
<!--                    </div>-->
<!--                    <div class="item item-steve render_wrapper">-->
<!--                        <div id="imgCond2_col4" class="render_div"></div>-->
<!--                    </div>-->
<!--                </div>-->

            </div>
    </section>


    <section class="section" id="BibTeX">
        <div class="container is-max-desktop content">
            <h2 class="title">BibTeX</h2>
            <pre><code>@misc{zeng2023paint3d,
      title={Paint3D: Paint Anything 3D with Lighting-Less Texture Diffusion Models},
      author={Xianfang Zeng and Xin Chen and Zhongqi Qi and Wen Liu and Zibo Zhao and Zhibin Wang and BIN FU and Yong Liu and Gang Yu},
      year={2023},
      eprint={2312.13913},
      archivePrefix={arXiv},
      primaryClass={cs.CV}
}</code></pre>
        </div>
    </section>


    <footer class="footer">
        <div class="container">
            <div class="columns is-centered">
                <div class="column is-8">
                    <div class="content">
                        <p style="text-align:center">
                            Source code mainly borrowed from <a href="https://daveredrum.github.io/Text2Tex/">Text2Tex</a> and <a href="https://mv-dream.github.io/">MVDream</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>

    <script type="importmap">
        {
            "imports": {
                "three": "./js/three.module.js"
            }
        }
    </script>

    <script type="module">

        import * as THREE from 'three';

        import { PLYLoader } from './js/PLYLoader.js';
        import { OBJLoader } from './js/OBJLoader.js';
        import { MTLLoader } from './js/MTLLoader.js';
        import { OrbitControls } from './js/OrbitControls.js'
        let div_to_scene = {
            "textCond2": {},
            "textCond3": {},
            "imgCond1": {},
            "imgCond2": {}
        };
        let div_camera = {
            "textCond2": null,
            "textCond3": null,
            "imgCond1": null,
            "imgCond2": null
        };

        let mouse_button_down = false;
        let list_of_orbit_controls = []
        let style_camera = null;
        let render_colors = true;
        let style_id = "0"

        function setup_camera(div_name){
            let container = document.getElementById(div_name);
            let width = container.parentElement.clientWidth;
            let height = container.parentElement.clientHeight;
            console.log(width, height)
            let camera = new THREE.PerspectiveCamera( 35, width / height, 0.1, 50 );
            let camera_init_position = new THREE.Vector3( -1, 0.5, 1 );
            camera.position.set(camera_init_position.x, camera_init_position.y, camera_init_position.z);
            return camera;
        }

        function setup_render_divs(div_name, obj_name, obj_path, mtl_path, texture_path){
            if (div_camera[obj_name] == null) {
                div_camera[obj_name] = setup_camera(div_name)
            }

            let orbit_control = create_render_div(div_camera[obj_name], div_name, obj_name, obj_path, mtl_path, texture_path)
            list_of_orbit_controls.push(orbit_control)
        }

        function create_render_div(camera, div_id, obj_name, obj_path, mtl_path, texture_path) {
            let container;
            let renderer, controls;

            init();
            animate();

            function init() {

                container = document.getElementById(div_id);
                let width = container.parentElement.clientWidth;
                let height = container.parentElement.clientHeight;


                div_to_scene[obj_name][div_id] = new THREE.Scene();
                div_to_scene[obj_name][div_id].background = new THREE.Color( 0xffffff );

                // ObJ file

                const objLoader  = new OBJLoader();
                const textureLoader = new THREE.TextureLoader();
                const mtlLoader = new MTLLoader();

                mtlLoader.load(mtl_path, function ( materials ) {
                    materials.preload();
                    objLoader
                        .setMaterials( materials )
                        .load( obj_path, function ( object ) {
                            textureLoader
                                .load( texture_path, function ( texture ) {
                                    object.traverse (function ( child ) {
                                        if ( child instanceof THREE.Mesh ) {
                                            child.material.map = texture;
                                        }
                                    });

                                    div_to_scene[obj_name][div_id].add( object );
                                });
                        });
                });

                div_to_scene[obj_name][div_id].add( new THREE.HemisphereLight( 0x333333, 0x222222, 0.51) );
                addShadowedLight(div_to_scene[obj_name][div_id], 1, 1, 1, 0xffffff, 1 );
                addShadowedLight(div_to_scene[obj_name][div_id],  -1, -1, - 1, 0xffffff, 0.5 );

                // renderer

                renderer = new THREE.WebGLRenderer( { antialias: true } );
                renderer.setPixelRatio( window.devicePixelRatio );
                renderer.setSize( width, height);
                renderer.outputEncoding = THREE.sRGBEncoding;

                renderer.shadowMap.enabled = true;

                container.appendChild( renderer.domElement );

                controls = new OrbitControls(camera, renderer.domElement)
                controls.enableDamping = false

                // resize

                window.addEventListener( 'resize', onWindowResize );

        }
            function onWindowResize() {
                let width = container.clientWidth;
                let height = container.clientHeight;
                camera.aspect = width / height;
                camera.updateProjectionMatrix();
                renderer.setSize( width, height );
            }
            function animate() {
                requestAnimationFrame( animate );
                render();
            }

            function render() {
                renderer.render( div_to_scene[obj_name][div_id], camera );
                controls.update();
            }

            return controls;
        }

        function addShadowedLight(scene, x, y, z, color, intensity ) {

            const directionalLight = new THREE.DirectionalLight( color, intensity );
            directionalLight.position.set( x, y, z );
            scene.add( directionalLight );

            directionalLight.castShadow = true;

            const d = 1;
            directionalLight.shadow.camera.left = - d;
            directionalLight.shadow.camera.right = d;
            directionalLight.shadow.camera.top = d;
            directionalLight.shadow.camera.bottom = - d;

            directionalLight.shadow.camera.near = 1;
            directionalLight.shadow.camera.far = 4;

            directionalLight.shadow.mapSize.width = 1024;
            directionalLight.shadow.mapSize.height = 1024;

            directionalLight.shadow.bias = - 0.001;

        }

        document.addEventListener('keydown', logKey);

        function logKey(evt) {
            if (evt.keyCode === 82 && !mouse_button_down) {
                reset_orbit_controls()
            }
        }

        function reset_orbit_controls() {
            list_of_orbit_controls.forEach(oc => {
                oc.reset()
            })
        }

        document.body.onmousedown = function(evt) {
            if (evt.button === 0)
                mouse_button_down = true
        }
        document.body.onmouseup = function(evt) {
            if (evt.button === 0)
                mouse_button_down = false
        }

        window.onload = function() {
            let slider = document.getElementsByClassName("slider")[0]
            slider.removeAttribute("tabIndex")

            const qualitative = ["textCond2", "textCond3", "imgCond1", "imgCond2"];

            qualitative.forEach(element => {
                if (element.includes("textCond")){
                    setup_render_divs(element+"_col1", element,
                    './static/meshes/'+element+'/col1/mesh_normalized.obj',
                    './static/meshes/'+element+'/col1/mesh_normalized.mtl',
                    './static/meshes/'+element+'/col1/mesh_normalized.png'
                    );
                }
                setup_render_divs(element+"_col2", element,
                    './static/meshes/'+element+'/col2/mesh_normalized.obj',
                    './static/meshes/'+element+'/col2/mesh_normalized.mtl',
                    './static/meshes/'+element+'/col2/mesh_normalized.png'
                );
                setup_render_divs(element+"_col3", element,
                    './static/meshes/'+element+'/col3/mesh_normalized.obj',
                    './static/meshes/'+element+'/col3/mesh_normalized.mtl',
                    './static/meshes/'+element+'/col3/mesh_normalized.png'
                );
                setup_render_divs(element+"_col4", element,
                    './static/meshes/'+element+'/col4/mesh_normalized.obj',
                    './static/meshes/'+element+'/col4/mesh_normalized.mtl',
                    './static/meshes/'+element+'/col4/mesh_normalized.png'
                );
            });
        };

    </script>

    <script src="./static/js/yall.js"></script>
    <script>
        yall(
            {
                observeChanges: true
            }
        );
    </script>

</body>

</html>
